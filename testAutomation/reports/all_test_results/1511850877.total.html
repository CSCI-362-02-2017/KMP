[4mRunning "env:test" (env) task[24m

[4mRunning "mochaTest:kmp_id" (mochaTest) task[24m
{
  "stats": {
    "suites": 10,
    "tests": 5,
    "passes": 5,
    "pending": 0,
    "failures": 0,
    "start": "2017-11-28T06:34:59.248Z",
    "end": "2017-11-28T06:34:59.300Z",
    "duration": 52
  },
  "tests": [
    {
      "title": "Test 01 : submission is rejected if id is undefined",
      "fullTitle": "Survey Model isNew() check Test 01 : submission is rejected if id is undefined",
      "duration": 5,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 02 : submission is rejected if id is null",
      "fullTitle": "Survey Model isNew() check Test 02 : submission is rejected if id is null",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 03 : submission is rejected if id is false",
      "fullTitle": "Survey Model isNew() check Test 03 : submission is rejected if id is false",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 04 : submission returns true for not-previously logged submissions",
      "fullTitle": "Survey Model isNew() check Test 04 : submission returns true for not-previously logged submissions",
      "duration": 18,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 05: submission returns false for previously logged submissions",
      "fullTitle": "Survey Model isNew() check Test 05: submission returns false for previously logged submissions",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    }
  ],
  "pending": [],
  "failures": [],
  "passes": [
    {
      "title": "Test 01 : submission is rejected if id is undefined",
      "fullTitle": "Survey Model isNew() check Test 01 : submission is rejected if id is undefined",
      "duration": 5,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 02 : submission is rejected if id is null",
      "fullTitle": "Survey Model isNew() check Test 02 : submission is rejected if id is null",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 03 : submission is rejected if id is false",
      "fullTitle": "Survey Model isNew() check Test 03 : submission is rejected if id is false",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 04 : submission returns true for not-previously logged submissions",
      "fullTitle": "Survey Model isNew() check Test 04 : submission returns true for not-previously logged submissions",
      "duration": 18,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 05: submission returns false for previously logged submissions",
      "fullTitle": "Survey Model isNew() check Test 05: submission returns false for previously logged submissions",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    }
  ]
}
[4mRunning "karma:headless" (karma) task[24m
[32m28 11 2017 06:35:05.268:INFO [framework.browserify]: [39mbundle built
[32m28 11 2017 06:35:05.286:INFO [karma]: [39mKarma v1.7.1 server started at http://0.0.0.0:9876/
[32m28 11 2017 06:35:05.287:INFO [launcher]: [39mLaunching browser ChromeHeadless with unlimited concurrency
[32m28 11 2017 06:35:05.417:INFO [launcher]: [39mStarting browser ChromeHeadless
[31m28 11 2017 06:35:05.453:ERROR [launcher]: [39mNo binary for ChromeHeadless browser on your platform.
  Please, set "CHROME_BIN" env variable.
[33mWarning: Task "karma:headless" failed. Use --force to continue.[39m

[31mAborted due to warnings.[39m


[4mExecution Time[24m[90m (2017-11-28 06:34:42 UTC-0)[39m
loading tasks     [34m15.1s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 66%[39m
mochaTest:kmp_id   [34m1.6s[39m  [34mâ–‡â–‡â–‡â–‡ 7%[39m
karma:headless     [34m6.2s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 27%[39m
[35mTotal 22.9s[39m

[4mRunning "env:test" (env) task[24m

[4mRunning "mochaTest:kmp_instanceId" (mochaTest) task[24m
[31m>> [39mMocha exploded!
[31m>> [39m/app/test/server/instanceId-5.spec.js:45[31m
>> [39m});[31m
>> [39m  ^[31m
>> [39mSyntaxError: Unexpected end of input[31m
>> [39m  at createScript (vm.js:53:10)[31m
>> [39m  at Object.runInThisContext (vm.js:95:10)[31m
>> [39m  at Module._compile (module.js:543:28)[31m
>> [39m  at Object.Module._extensions..js (module.js:580:10)[31m
>> [39m  at Module.load (/app/node_modules/coffee-script/lib/coffee-script/register.js:45:36)[31m
>> [39m  at tryModuleLoad (module.js:447:12)[31m
>> [39m  at Function.Module._load (module.js:439:3)[31m
>> [39m  at Module.require (module.js:498:17)[31m
>> [39m  at require (internal/module.js:20:19)[31m
>> [39m  at /app/node_modules/mocha/lib/mocha.js:231:27[31m
>> [39m  at Array.forEach (native)[31m
>> [39m  at Mocha.loadFiles (/app/node_modules/mocha/lib/mocha.js:228:14)[31m
>> [39m  at Mocha.run (/app/node_modules/mocha/lib/mocha.js:514:10)[31m
>> [39m  at MochaWrapper.run (/app/node_modules/grunt-mocha-test/tasks/lib/MochaWrapper.js:47:13)[31m
>> [39m  at /app/node_modules/grunt-mocha-test/tasks/mocha-test.js:84:20[31m
>> [39m  at capture (/app/node_modules/grunt-mocha-test/tasks/mocha-test.js:31:5)[31m
>> [39m  at Object.<anonymous> (/app/node_modules/grunt-mocha-test/tasks/mocha-test.js:79:5)[31m
>> [39m  at Object.<anonymous> (/app/node_modules/grunt/lib/grunt/task.js:255:15)[31m
>> [39m  at Object.thisTask.fn (/app/node_modules/grunt/lib/grunt/task.js:73:16)[31m
>> [39m  at Object.<anonymous> (/app/node_modules/grunt/lib/util/task.js:294:30)[31m
>> [39m  at Task.runTaskFn (/app/node_modules/grunt/lib/util/task.js:244:24)[31m
>> [39m  at Task.<anonymous> (/app/node_modules/grunt/lib/util/task.js:293:12)[31m
>> [39m  at /app/node_modules/grunt/lib/util/task.js:220:11[31m
>> [39m  at _combinedTickCallback (internal/process/next_tick.js:73:7)[31m
>> [39m  at process._tickDomainCallback (internal/process/next_tick.js:128:9)[31m
>> [39m  at Module.runMain (module.js:607:11)[31m
>> [39m  at run (bootstrap_node.js:427:7)[31m
>> [39m  at startup (bootstrap_node.js:151:9)[31m
>> [39m  at bootstrap_node.js:542:3
[33mWarning: Task "mochaTest:kmp_instanceId" failed. Use --force to continue.[39m

[31mAborted due to warnings.[39m


[4mExecution Time[24m[90m (2017-11-28 06:35:08 UTC-0)[39m
loading tasks             [34m3.1s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 98%[39m
mochaTest:kmp_instanceId  [34m45ms[39m  [34mâ–‡ 1%[39m
[35mTotal 3.1s[39m

[4mRunning "env:test" (env) task[24m

[4mRunning "mochaTest:kmp_set_survey" (mochaTest) task[24m
{
  "stats": {
    "suites": 10,
    "tests": 5,
    "passes": 5,
    "pending": 0,
    "failures": 0,
    "start": "2017-11-28T06:35:14.545Z",
    "end": "2017-11-28T06:35:14.580Z",
    "duration": 35
  },
  "tests": [
    {
      "title": "Test 015: store_survey returns an error if the OpenRosa Form ID is missing",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 015: store_survey returns an error if the OpenRosa Form ID is missing",
      "duration": 4,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 016: store_survey returns an error if the OpenRosa Form ID is an empty string",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 016: store_survey returns an error if the OpenRosa Form ID is an empty string",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 017:  store_survey returns an error if the OpenRosa Server is an empty string",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 017:  store_survey returns an error if the OpenRosa Server is an empty string",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 018:  store_survey returns an enketo id if survey is stored successfully",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 018:  store_survey returns an enketo id if survey is stored successfully",
      "duration": 5,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 014: store_survey returns an error if the OpenRosa Server is missing",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 014: store_survey returns an error if the OpenRosa Server is missing",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    }
  ],
  "pending": [],
  "failures": [],
  "passes": [
    {
      "title": "Test 015: store_survey returns an error if the OpenRosa Form ID is missing",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 015: store_survey returns an error if the OpenRosa Form ID is missing",
      "duration": 4,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 016: store_survey returns an error if the OpenRosa Form ID is an empty string",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 016: store_survey returns an error if the OpenRosa Form ID is an empty string",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 017:  store_survey returns an error if the OpenRosa Server is an empty string",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 017:  store_survey returns an error if the OpenRosa Server is an empty string",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 018:  store_survey returns an enketo id if survey is stored successfully",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 018:  store_survey returns an enketo id if survey is stored successfully",
      "duration": 5,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 014: store_survey returns an error if the OpenRosa Server is missing",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 014: store_survey returns an error if the OpenRosa Server is missing",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    }
  ]
}
[4mRunning "karma:headless" (karma) task[24m
[32m28 11 2017 06:35:18.823:INFO [framework.browserify]: [39mbundle built
[32m28 11 2017 06:35:18.851:INFO [karma]: [39mKarma v1.7.1 server started at http://0.0.0.0:9876/
[32m28 11 2017 06:35:18.852:INFO [launcher]: [39mLaunching browser ChromeHeadless with unlimited concurrency
[32m28 11 2017 06:35:18.858:INFO [launcher]: [39mStarting browser ChromeHeadless
[31m28 11 2017 06:35:18.860:ERROR [launcher]: [39mNo binary for ChromeHeadless browser on your platform.
  Please, set "CHROME_BIN" env variable.
[33mWarning: Task "karma:headless" failed. Use --force to continue.[39m

[31mAborted due to warnings.[39m


[4mExecution Time[24m[90m (2017-11-28 06:35:12 UTC-0)[39m
loading tasks              [34m1.6s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 25%[39m
mochaTest:kmp_set_survey  [34m385ms[39m  [34mâ–‡â–‡â–‡ 6%[39m
karma:headless             [34m4.3s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 69%[39m
[35mTotal 6.2s[39m

[4mRunning "env:test" (env) task[24m

[4mRunning "mochaTest:kmp_cache_instance" (mochaTest) task[24m
{
  "stats": {
    "suites": 12,
    "tests": 6,
    "passes": 6,
    "pending": 0,
    "failures": 0,
    "start": "2017-11-28T06:35:21.400Z",
    "end": "2017-11-28T06:35:21.446Z",
    "duration": 46
  },
  "tests": [
    {
      "title": "Test 019: cache_instance returns an 400 error when instanceId is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 019: cache_instance returns an 400 error when instanceId is missing",
      "duration": 9,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 020: cache_instance returns an 400 error when openRosaId is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 020: cache_instance returns an 400 error when openRosaId is missing",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 021: cache_instance returns an 400 error when openRosaServer is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 021: cache_instance returns an 400 error when openRosaServer is missing",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 022: cache_instance returns an 400 error when instance is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 022: cache_instance returns an 400 error when instance is missing",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 023: cache_instance returns the survey object when the instance is cached successfully",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 023: cache_instance returns the survey object when the instance is cached successfully",
      "duration": 4,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 024: get_cached_instance returns an 400 error when instanceId is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 024: get_cached_instance returns an 400 error when instanceId is missing",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    }
  ],
  "pending": [],
  "failures": [],
  "passes": [
    {
      "title": "Test 019: cache_instance returns an 400 error when instanceId is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 019: cache_instance returns an 400 error when instanceId is missing",
      "duration": 9,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 020: cache_instance returns an 400 error when openRosaId is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 020: cache_instance returns an 400 error when openRosaId is missing",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 021: cache_instance returns an 400 error when openRosaServer is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 021: cache_instance returns an 400 error when openRosaServer is missing",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 022: cache_instance returns an 400 error when instance is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 022: cache_instance returns an 400 error when instance is missing",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 023: cache_instance returns the survey object when the instance is cached successfully",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 023: cache_instance returns the survey object when the instance is cached successfully",
      "duration": 4,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 024: get_cached_instance returns an 400 error when instanceId is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 024: get_cached_instance returns an 400 error when instanceId is missing",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    }
  ]
}
[4mRunning "karma:headless" (karma) task[24m
[32m28 11 2017 06:35:25.697:INFO [framework.browserify]: [39mbundle built
[32m28 11 2017 06:35:25.728:INFO [karma]: [39mKarma v1.7.1 server started at http://0.0.0.0:9876/
[32m28 11 2017 06:35:25.729:INFO [launcher]: [39mLaunching browser ChromeHeadless with unlimited concurrency
[32m28 11 2017 06:35:25.737:INFO [launcher]: [39mStarting browser ChromeHeadless
[31m28 11 2017 06:35:25.739:ERROR [launcher]: [39mNo binary for ChromeHeadless browser on your platform.
  Please, set "CHROME_BIN" env variable.
[33mWarning: Task "karma:headless" failed. Use --force to continue.[39m

[31mAborted due to warnings.[39m


[4mExecution Time[24m[90m (2017-11-28 06:35:19 UTC-0)[39m
loading tasks                  [34m1.6s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 25%[39m
mochaTest:kmp_cache_instance  [34m325ms[39m  [34mâ–‡â–‡ 5%[39m
karma:headless                 [34m4.3s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 70%[39m
[35mTotal 6.2s[39m

[4mRunning "env:test" (env) task[24m

[4mRunning "mochaTest:kmp_obtain_cached_instance" (mochaTest) task[24m
{
  "stats": {
    "suites": 6,
    "tests": 3,
    "passes": 3,
    "pending": 0,
    "failures": 0,
    "start": "2017-11-28T06:35:29.744Z",
    "end": "2017-11-28T06:35:29.822Z",
    "duration": 78
  },
  "tests": [
    {
      "title": "Test 25 : obtain_cached_instance returns an 400 error when instanceId is missing",
      "fullTitle": "Instance Model get: when attempting to obtain a cached instance Test 25 : obtain_cached_instance returns an 400 error when instanceId is missing",
      "duration": 20,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 26 : obtain_cached_instance returns an 404 error when instance record not cached",
      "fullTitle": "Instance Model get: when attempting to obtain a cached instance Test 26 : obtain_cached_instance returns an 404 error when instance record not cached",
      "duration": 4,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 27 : obtain_cached_instance returns the survey object with the instance property when successful",
      "fullTitle": "Instance Model get: when attempting to obtain a cached instance Test 27 : obtain_cached_instance returns the survey object with the instance property when successful",
      "duration": 4,
      "currentRetry": 0,
      "err": {}
    }
  ],
  "pending": [],
  "failures": [],
  "passes": [
    {
      "title": "Test 25 : obtain_cached_instance returns an 400 error when instanceId is missing",
      "fullTitle": "Instance Model get: when attempting to obtain a cached instance Test 25 : obtain_cached_instance returns an 400 error when instanceId is missing",
      "duration": 20,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 26 : obtain_cached_instance returns an 404 error when instance record not cached",
      "fullTitle": "Instance Model get: when attempting to obtain a cached instance Test 26 : obtain_cached_instance returns an 404 error when instance record not cached",
      "duration": 4,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 27 : obtain_cached_instance returns the survey object with the instance property when successful",
      "fullTitle": "Instance Model get: when attempting to obtain a cached instance Test 27 : obtain_cached_instance returns the survey object with the instance property when successful",
      "duration": 4,
      "currentRetry": 0,
      "err": {}
    }
  ]
}
[4mRunning "karma:headless" (karma) task[24m
[32m28 11 2017 06:35:36.956:INFO [framework.browserify]: [39mbundle built
[32m28 11 2017 06:35:37.012:INFO [karma]: [39mKarma v1.7.1 server started at http://0.0.0.0:9876/
[32m28 11 2017 06:35:37.013:INFO [launcher]: [39mLaunching browser ChromeHeadless with unlimited concurrency
[32m28 11 2017 06:35:37.025:INFO [launcher]: [39mStarting browser ChromeHeadless
[31m28 11 2017 06:35:37.028:ERROR [launcher]: [39mNo binary for ChromeHeadless browser on your platform.
  Please, set "CHROME_BIN" env variable.
[33mWarning: Task "karma:headless" failed. Use --force to continue.[39m

[31mAborted due to warnings.[39m


[4mExecution Time[24m[90m (2017-11-28 06:35:27 UTC-0)[39m
loading tasks                [34m2s[39m  [34mâ–‡â–‡â–‡â–‡â–‡ 21%[39m
mochaTest:k...d_instance  [34m451ms[39m  [34mâ–‡â–‡ 5%[39m
karma:headless             [34m7.2s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 74%[39m
[35mTotal 9.7s[39m

