[4mRunning "env:test" (env) task[24m

[4mRunning "mochaTest:kmp_id" (mochaTest) task[24m
{
  "stats": {
    "suites": 10,
    "tests": 5,
    "passes": 5,
    "pending": 0,
    "failures": 0,
    "start": "2017-11-28T07:18:02.344Z",
    "end": "2017-11-28T07:18:02.379Z",
    "duration": 35
  },
  "tests": [
    {
      "title": "Test 01 : submission is rejected if id is undefined",
      "fullTitle": "Survey Model isNew() check Test 01 : submission is rejected if id is undefined",
      "duration": 5,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 02 : submission is rejected if id is null",
      "fullTitle": "Survey Model isNew() check Test 02 : submission is rejected if id is null",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 03 : submission is rejected if id is false",
      "fullTitle": "Survey Model isNew() check Test 03 : submission is rejected if id is false",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 04 : submission returns true for not-previously logged submissions",
      "fullTitle": "Survey Model isNew() check Test 04 : submission returns true for not-previously logged submissions",
      "duration": 3,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 05: submission returns false for previously logged submissions",
      "fullTitle": "Survey Model isNew() check Test 05: submission returns false for previously logged submissions",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    }
  ],
  "pending": [],
  "failures": [],
  "passes": [
    {
      "title": "Test 01 : submission is rejected if id is undefined",
      "fullTitle": "Survey Model isNew() check Test 01 : submission is rejected if id is undefined",
      "duration": 5,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 02 : submission is rejected if id is null",
      "fullTitle": "Survey Model isNew() check Test 02 : submission is rejected if id is null",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 03 : submission is rejected if id is false",
      "fullTitle": "Survey Model isNew() check Test 03 : submission is rejected if id is false",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 04 : submission returns true for not-previously logged submissions",
      "fullTitle": "Survey Model isNew() check Test 04 : submission returns true for not-previously logged submissions",
      "duration": 3,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 05: submission returns false for previously logged submissions",
      "fullTitle": "Survey Model isNew() check Test 05: submission returns false for previously logged submissions",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    }
  ]
}
[4mRunning "karma:headless" (karma) task[24m
[32m28 11 2017 07:18:06.678:INFO [framework.browserify]: [39mbundle built
[32m28 11 2017 07:18:06.714:INFO [karma]: [39mKarma v1.7.1 server started at http://0.0.0.0:9876/
[32m28 11 2017 07:18:06.717:INFO [launcher]: [39mLaunching browser ChromeHeadless with unlimited concurrency
[32m28 11 2017 07:18:06.723:INFO [launcher]: [39mStarting browser ChromeHeadless
[31m28 11 2017 07:18:06.725:ERROR [launcher]: [39mNo binary for ChromeHeadless browser on your platform.
  Please, set "CHROME_BIN" env variable.
[33mWarning: Task "karma:headless" failed. Use --force to continue.[39m

[31mAborted due to warnings.[39m


[4mExecution Time[24m[90m (2017-11-28 07:18:00 UTC-0)[39m
loading tasks      [34m1.6s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 26%[39m
mochaTest:kmp_id  [34m192ms[39m  [34mâ–‡â–‡ 3%[39m
karma:headless     [34m4.4s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 71%[39m
[35mTotal 6.1s[39m

[4mRunning "env:test" (env) task[24m

[4mRunning "mochaTest:kmp_instanceId" (mochaTest) task[24m
{
  "stats": {
    "suites": 8,
    "tests": 4,
    "passes": 4,
    "pending": 0,
    "failures": 0,
    "start": "2017-11-28T07:18:42.086Z",
    "end": "2017-11-28T07:18:42.162Z",
    "duration": 76
  },
  "tests": [
    {
      "title": "Test: 06 submission is rejected if instanceId is undefined",
      "fullTitle": "Survey Model isNew() check Test: 06 submission is rejected if instanceId is undefined",
      "duration": 7,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test: 07 submission is rejected if instanceId is null",
      "fullTitle": "Survey Model isNew() check Test: 07 submission is rejected if instanceId is null",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test: 08 submission is rejected if instanceId is false",
      "fullTitle": "Survey Model isNew() check Test: 08 submission is rejected if instanceId is false",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test: 009 is rejected if instanceId is undefined",
      "fullTitle": "Survey Model isNew() check Test: 009 is rejected if instanceId is undefined",
      "duration": 2,
      "currentRetry": 0,
      "err": {}
    }
  ],
  "pending": [],
  "failures": [],
  "passes": [
    {
      "title": "Test: 06 submission is rejected if instanceId is undefined",
      "fullTitle": "Survey Model isNew() check Test: 06 submission is rejected if instanceId is undefined",
      "duration": 7,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test: 07 submission is rejected if instanceId is null",
      "fullTitle": "Survey Model isNew() check Test: 07 submission is rejected if instanceId is null",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test: 08 submission is rejected if instanceId is false",
      "fullTitle": "Survey Model isNew() check Test: 08 submission is rejected if instanceId is false",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test: 009 is rejected if instanceId is undefined",
      "fullTitle": "Survey Model isNew() check Test: 009 is rejected if instanceId is undefined",
      "duration": 2,
      "currentRetry": 0,
      "err": {}
    }
  ]
}
[4mRunning "karma:headless" (karma) task[24m
[32m28 11 2017 07:18:46.719:INFO [framework.browserify]: [39mbundle built
[32m28 11 2017 07:18:46.737:INFO [karma]: [39mKarma v1.7.1 server started at http://0.0.0.0:9876/
[32m28 11 2017 07:18:46.738:INFO [launcher]: [39mLaunching browser ChromeHeadless with unlimited concurrency
[32m28 11 2017 07:18:46.795:INFO [launcher]: [39mStarting browser ChromeHeadless
[31m28 11 2017 07:18:46.948:ERROR [launcher]: [39mNo binary for ChromeHeadless browser on your platform.
  Please, set "CHROME_BIN" env variable.
[33mWarning: Task "karma:headless" failed. Use --force to continue.[39m

[31mAborted due to warnings.[39m


[4mExecution Time[24m[90m (2017-11-28 07:18:18 UTC-0)[39m
loading tasks             [34m23.2s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 82%[39m
mochaTest:kmp_instanceId  [34m311ms[39m  [34mâ–‡ 1%[39m
karma:headless             [34m4.8s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡ 17%[39m
[35mTotal 28.3s[39m

[4mRunning "env:test" (env) task[24m

[4mRunning "mochaTest:kmp_set_survey" (mochaTest) task[24m
{
  "stats": {
    "suites": 10,
    "tests": 5,
    "passes": 5,
    "pending": 0,
    "failures": 0,
    "start": "2017-11-28T07:19:08.239Z",
    "end": "2017-11-28T07:19:08.328Z",
    "duration": 89
  },
  "tests": [
    {
      "title": "Test 015: store_survey returns an error if the OpenRosa Form ID is missing",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 015: store_survey returns an error if the OpenRosa Form ID is missing",
      "duration": 3,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 016: store_survey returns an error if the OpenRosa Form ID is an empty string",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 016: store_survey returns an error if the OpenRosa Form ID is an empty string",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 017:  store_survey returns an error if the OpenRosa Server is an empty string",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 017:  store_survey returns an error if the OpenRosa Server is an empty string",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 018:  store_survey returns an enketo id if survey is stored successfully",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 018:  store_survey returns an enketo id if survey is stored successfully",
      "duration": 10,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 014: store_survey returns an error if the OpenRosa Server is missing",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 014: store_survey returns an error if the OpenRosa Server is missing",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    }
  ],
  "pending": [],
  "failures": [],
  "passes": [
    {
      "title": "Test 015: store_survey returns an error if the OpenRosa Form ID is missing",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 015: store_survey returns an error if the OpenRosa Form ID is missing",
      "duration": 3,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 016: store_survey returns an error if the OpenRosa Form ID is an empty string",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 016: store_survey returns an error if the OpenRosa Form ID is an empty string",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 017:  store_survey returns an error if the OpenRosa Server is an empty string",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 017:  store_survey returns an error if the OpenRosa Server is an empty string",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 018:  store_survey returns an enketo id if survey is stored successfully",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 018:  store_survey returns an enketo id if survey is stored successfully",
      "duration": 10,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 014: store_survey returns an error if the OpenRosa Server is missing",
      "fullTitle": "Survey Model set: when attempting to store new surveys Test 014: store_survey returns an error if the OpenRosa Server is missing",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    }
  ]
}
[4mRunning "karma:headless" (karma) task[24m
[32m28 11 2017 07:19:14.106:INFO [framework.browserify]: [39mbundle built
[32m28 11 2017 07:19:14.126:INFO [karma]: [39mKarma v1.7.1 server started at http://0.0.0.0:9876/
[32m28 11 2017 07:19:14.126:INFO [launcher]: [39mLaunching browser ChromeHeadless with unlimited concurrency
[32m28 11 2017 07:19:14.134:INFO [launcher]: [39mStarting browser ChromeHeadless
[31m28 11 2017 07:19:14.135:ERROR [launcher]: [39mNo binary for ChromeHeadless browser on your platform.
  Please, set "CHROME_BIN" env variable.
[33mWarning: Task "karma:headless" failed. Use --force to continue.[39m

[31mAborted due to warnings.[39m


[4mExecution Time[24m[90m (2017-11-28 07:18:51 UTC-0)[39m
loading tasks             [34m14.2s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 62%[39m
mochaTest:kmp_set_survey   [34m2.9s[39m  [34mâ–‡â–‡â–‡â–‡â–‡ 13%[39m
karma:headless             [34m5.8s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 25%[39m
[35mTotal 23s[39m

[4mRunning "env:test" (env) task[24m

[4mRunning "mochaTest:kmp_cache_instance" (mochaTest) task[24m
{
  "stats": {
    "suites": 12,
    "tests": 6,
    "passes": 5,
    "pending": 0,
    "failures": 1,
    "start": "2017-11-28T07:19:26.864Z",
    "end": "2017-11-28T07:19:26.931Z",
    "duration": 67
  },
  "tests": [
    {
      "title": "Test 019: cache_instance returns an 400 error when instanceId is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 019: cache_instance returns an 400 error when instanceId is missing",
      "duration": 7,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 020: cache_instance returns an 400 error when openRosaId is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 020: cache_instance returns an 400 error when openRosaId is missing",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 021: cache_instance returns an 400 error when openRosaServer is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 021: cache_instance returns an 400 error when openRosaServer is missing",
      "duration": 2,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 022: cache_instance returns an 400 error when instance is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 022: cache_instance returns an 400 error when instance is missing",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 023: cache_instance returns the survey object when the instance is cached successfully",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 023: cache_instance returns the survey object when the instance is cached successfully",
      "duration": 6,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 024: get_cached_instance returns an 400 error when instanceId is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 024: get_cached_instance returns an 400 error when instanceId is missing",
      "duration": 2,
      "currentRetry": 0,
      "err": {
        "message": "expected 400 to equal 404",
        "showDiff": true,
        "actual": 400,
        "expected": 404,
        "stack": "AssertionError: expected 400 to equal 404\n  at getBasePromise.then.then.newArgs (node_modules/chai-as-promised/lib/chai-as-promised.js:302:22)\n  at Array.<anonymous> (node_modules/lie/lib/index.js:88:21)\n  at nextTick (node_modules/immediate/lib/index.js:61:18)\n  at _combinedTickCallback (internal/process/next_tick.js:73:7)\n  at process._tickDomainCallback (internal/process/next_tick.js:128:9)\n"
      }
    }
  ],
  "pending": [],
  "failures": [
    {
      "title": "Test 024: get_cached_instance returns an 400 error when instanceId is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 024: get_cached_instance returns an 400 error when instanceId is missing",
      "duration": 2,
      "currentRetry": 0,
      "err": {
        "message": "expected 400 to equal 404",
        "showDiff": true,
        "actual": 400,
        "expected": 404,
        "stack": "AssertionError: expected 400 to equal 404\n  at getBasePromise.then.then.newArgs (node_modules/chai-as-promised/lib/chai-as-promised.js:302:22)\n  at Array.<anonymous> (node_modules/lie/lib/index.js:88:21)\n  at nextTick (node_modules/immediate/lib/index.js:61:18)\n  at _combinedTickCallback (internal/process/next_tick.js:73:7)\n  at process._tickDomainCallback (internal/process/next_tick.js:128:9)\n"
      }
    }
  ],
  "passes": [
    {
      "title": "Test 019: cache_instance returns an 400 error when instanceId is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 019: cache_instance returns an 400 error when instanceId is missing",
      "duration": 7,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 020: cache_instance returns an 400 error when openRosaId is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 020: cache_instance returns an 400 error when openRosaId is missing",
      "duration": 1,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 021: cache_instance returns an 400 error when openRosaServer is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 021: cache_instance returns an 400 error when openRosaServer is missing",
      "duration": 2,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 022: cache_instance returns an 400 error when instance is missing",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 022: cache_instance returns an 400 error when instance is missing",
      "duration": 0,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 023: cache_instance returns the survey object when the instance is cached successfully",
      "fullTitle": "Instance Model set: when attempting to cache an instance Test 023: cache_instance returns the survey object when the instance is cached successfully",
      "duration": 6,
      "currentRetry": 0,
      "err": {}
    }
  ]
}[33mWarning: Task "mochaTest:kmp_cache_instance" failed. Use --force to continue.[39m

[31mAborted due to warnings.[39m


[4mExecution Time[24m[90m (2017-11-28 07:19:17 UTC-0)[39m
loading tasks                  [34m8.9s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 95%[39m
mochaTest:kmp_cache_instance  [34m419ms[39m  [34mâ–‡â–‡ 4%[39m
[35mTotal 9.3s[39m

[4mRunning "env:test" (env) task[24m

[4mRunning "mochaTest:kmp_obtain_cached_instance" (mochaTest) task[24m
{
  "stats": {
    "suites": 6,
    "tests": 3,
    "passes": 3,
    "pending": 0,
    "failures": 0,
    "start": "2017-11-28T07:19:31.944Z",
    "end": "2017-11-28T07:19:32.006Z",
    "duration": 62
  },
  "tests": [
    {
      "title": "Test 25 : obtain_cached_instance returns an 400 error when instanceId is missing",
      "fullTitle": "Instance Model get: when attempting to obtain a cached instance Test 25 : obtain_cached_instance returns an 400 error when instanceId is missing",
      "duration": 7,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 26 : obtain_cached_instance returns an 404 error when instance record not cached",
      "fullTitle": "Instance Model get: when attempting to obtain a cached instance Test 26 : obtain_cached_instance returns an 404 error when instance record not cached",
      "duration": 3,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 27 : obtain_cached_instance returns the survey object with the instance property when successful",
      "fullTitle": "Instance Model get: when attempting to obtain a cached instance Test 27 : obtain_cached_instance returns the survey object with the instance property when successful",
      "duration": 6,
      "currentRetry": 0,
      "err": {}
    }
  ],
  "pending": [],
  "failures": [],
  "passes": [
    {
      "title": "Test 25 : obtain_cached_instance returns an 400 error when instanceId is missing",
      "fullTitle": "Instance Model get: when attempting to obtain a cached instance Test 25 : obtain_cached_instance returns an 400 error when instanceId is missing",
      "duration": 7,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 26 : obtain_cached_instance returns an 404 error when instance record not cached",
      "fullTitle": "Instance Model get: when attempting to obtain a cached instance Test 26 : obtain_cached_instance returns an 404 error when instance record not cached",
      "duration": 3,
      "currentRetry": 0,
      "err": {}
    },
    {
      "title": "Test 27 : obtain_cached_instance returns the survey object with the instance property when successful",
      "fullTitle": "Instance Model get: when attempting to obtain a cached instance Test 27 : obtain_cached_instance returns the survey object with the instance property when successful",
      "duration": 6,
      "currentRetry": 0,
      "err": {}
    }
  ]
}
[4mRunning "karma:headless" (karma) task[24m
[32m28 11 2017 07:19:36.487:INFO [framework.browserify]: [39mbundle built
[32m28 11 2017 07:19:36.522:INFO [karma]: [39mKarma v1.7.1 server started at http://0.0.0.0:9876/
[32m28 11 2017 07:19:36.523:INFO [launcher]: [39mLaunching browser ChromeHeadless with unlimited concurrency
[32m28 11 2017 07:19:36.609:INFO [launcher]: [39mStarting browser ChromeHeadless
[31m28 11 2017 07:19:36.624:ERROR [launcher]: [39mNo binary for ChromeHeadless browser on your platform.
  Please, set "CHROME_BIN" env variable.
[33mWarning: Task "karma:headless" failed. Use --force to continue.[39m

[31mAborted due to warnings.[39m


[4mExecution Time[24m[90m (2017-11-28 07:19:28 UTC-0)[39m
loading tasks              [34m2.7s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 35%[39m
mochaTest:k...d_instance  [34m367ms[39m  [34mâ–‡â–‡ 5%[39m
karma:headless             [34m4.7s[39m  [34mâ–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡â–‡ 60%[39m
[35mTotal 7.8s[39m

